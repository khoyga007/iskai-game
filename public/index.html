<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Isekai Adventure</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="ai-addon.css">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal-overlay hidden">
    <div class="modal-box">
      <div class="modal-header">
        <span class="modal-title">âš™ï¸ Cáº¥u hÃ¬nh API Keys</span>
        <button class="modal-close" onclick="closeSettings()">âœ•</button>
      </div>
      <div class="modal-body">
        <p class="modal-desc">Nháº­p API key cho tá»«ng provider. Key Ä‘Æ°á»£c lÆ°u trÃªn server vÃ  Ã¡p dá»¥ng ngay.</p>

        <div class="api-key-group">
          <div class="api-key-label">
            âœ¦ Gemini (Google)
            <a href="https://aistudio.google.com/apikey" target="_blank" class="get-key-link">Láº¥y key â†’</a>
          </div>
          <div class="api-key-input-wrap">
            <input type="password" id="key-gemini" placeholder="AIza...">
            <button class="toggle-vis" onclick="toggleVis('key-gemini')">ğŸ‘</button>
          </div>
        </div>

        <div class="api-key-group">
          <div class="api-key-label">
            â—† Claude (Anthropic)
            <a href="https://console.anthropic.com/settings/keys" target="_blank" class="get-key-link">Láº¥y key â†’</a>
          </div>
          <div class="api-key-input-wrap">
            <input type="password" id="key-claude" placeholder="sk-ant-...">
            <button class="toggle-vis" onclick="toggleVis('key-claude')">ğŸ‘</button>
          </div>
        </div>

        <div class="api-key-group">
          <div class="api-key-label">
            â‹ OpenAI (GPT-4o)
            <a href="https://platform.openai.com/api-keys" target="_blank" class="get-key-link">Láº¥y key â†’</a>
          </div>
          <div class="api-key-input-wrap">
            <input type="password" id="key-openai" placeholder="sk-...">
            <button class="toggle-vis" onclick="toggleVis('key-openai')">ğŸ‘</button>
          </div>
        </div>

        <div class="api-key-group">
          <div class="api-key-label">
            âš¡ Groq (Llama)
            <a href="https://console.groq.com/keys" target="_blank" class="get-key-link">Láº¥y key â†’</a>
          </div>
          <div class="api-key-input-wrap">
            <input type="password" id="key-groq" placeholder="gsk_...">
            <button class="toggle-vis" onclick="toggleVis('key-groq')">ğŸ‘</button>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <span id="settings-status" class="settings-status"></span>
        <button class="modal-save-btn" onclick="saveSettings()">ğŸ’¾ LÆ°u & Ãp dá»¥ng</button>
      </div>
    </div>
  </div>

  <!-- NÃºt gear cá»‘ Ä‘á»‹nh -->
  <button class="gear-btn" onclick="openSettings()" title="Cáº¥u hÃ¬nh API Keys">âš™ï¸</button>

  <!-- MÃ n hÃ¬nh táº¡o nhÃ¢n váº­t -->
  <div id="setup-screen">
    <div class="bg-overlay"></div>
    <div class="particles" id="particles"></div>

    <div class="setup-wrapper">
      <div class="setup-left">
        <div class="logo-area">
          <div class="logo-icon">âš”ï¸</div>
          <h1 class="logo-title">ISEKAI</h1>
          <h2 class="logo-subtitle">ADVENTURE</h2>
          <p class="logo-desc">Má»™t tháº¿ giá»›i má»›i Ä‘ang chá» Ä‘Ã³n báº¡n.<br>HÃ£y ká»ƒ vá» báº£n thÃ¢n vÃ  báº¯t Ä‘áº§u hÃ nh trÃ¬nh.</p>
        </div>
      </div>

      <div class="setup-right">
        <div class="setup-card">
          <h3 class="card-title">âœ¦ Táº¡o NhÃ¢n Váº­t âœ¦</h3>

          <div class="continue-section" id="continue-section" style="display:none">
            <div class="template-label">Tiáº¿p tá»¥c hÃ nh trÃ¬nh cÅ©</div>
            <div id="saves-list"></div>
            <div class="sidebar-divider" style="margin: 16px 0"></div>
          </div>

          <div class="template-section">
            <div class="template-label">Chá»n ká»‹ch báº£n máº«u hoáº·c tá»± nháº­p</div>
            <div class="template-grid">
              <button class="template-btn" onclick="loadTemplate(0)">âš”ï¸ Anh hÃ¹ng</button>
              <button class="template-btn" onclick="loadTemplate(1)">ğŸ˜ˆ Pháº£n diá»‡n</button>
              <button class="template-btn" onclick="loadTemplate(2)">ğŸ•ï¸ Sinh tá»“n</button>
              <button class="template-btn" onclick="loadTemplate(3)">ğŸ‘‘ QuÃ½ tá»™c</button>
              <button class="template-btn" onclick="loadTemplate(4)">ğŸ­ Bá»‹ hiá»ƒu nháº§m</button>
            </div>
          </div>

          <div class="form-group">
            <label>TÃªn nhÃ¢n váº­t</label>
            <input type="text" id="char-name" placeholder="VÃ­ dá»¥: Kira Yamato...">
          </div>

          <div class="form-group">
            <label>TÃªn tháº¿ giá»›i</label>
            <input type="text" id="char-world" placeholder="VÃ­ dá»¥: Eldoria, Astravia...">
          </div>

          <div class="form-group">
            <label>Ká»¹ nÄƒng Ä‘á»™c nháº¥t</label>
            <input type="text" id="char-skill" placeholder="VÃ­ dá»¥: Sao chÃ©p má»i ma thuáº­t...">
          </div>

          <div class="form-group">
            <label>Tiá»ƒu sá»­</label>
            <textarea id="char-backstory" rows="3" placeholder="Ká»ƒ ngáº¯n gá»n vá» báº£n thÃ¢n trÆ°á»›c khi Ä‘Æ°á»£c triá»‡u há»“i..."></textarea>
          </div>

          <div class="form-group">
            <label>ğŸ¤– AI Engine</label>
            <div class="ai-selector" id="ai-selector">
              <button class="ai-btn active" data-provider="gemini" onclick="selectAI('gemini')">
                <span class="ai-icon">âœ¦</span>
                <span class="ai-name">Gemini</span>
                <span class="ai-desc">Google Â· Máº·c Ä‘á»‹nh</span>
              </button>
              <button class="ai-btn" data-provider="claude" onclick="selectAI('claude')">
                <span class="ai-icon">â—†</span>
                <span class="ai-name">Claude</span>
                <span class="ai-desc">Anthropic Â· SÃ¡ng táº¡o</span>
              </button>
              <button class="ai-btn" data-provider="openai" onclick="selectAI('openai')">
                <span class="ai-icon">â‹</span>
                <span class="ai-name">GPT-4o</span>
                <span class="ai-desc">OpenAI Â· Máº¡nh máº½</span>
              </button>
              <button class="ai-btn" data-provider="groq" onclick="selectAI('groq')">
                <span class="ai-icon">âš¡</span>
                <span class="ai-name">Groq</span>
                <span class="ai-desc">Llama Â· Nhanh nháº¥t</span>
              </button>
            </div>
          </div>

          <button id="start-btn" onclick="startGame()">
            <span class="btn-icon">ğŸŒ€</span>
            <span>Báº¯t Ä‘áº§u hÃ nh trÃ¬nh</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- MÃ n hÃ¬nh chÆ¡i game -->
  <div id="game-screen" class="hidden">
    <div class="game-bg"></div>

    <div class="game-layout">
      <div class="sidebar">
        <div class="sidebar-header">âš”ï¸ ISEKAI</div>
        <div class="char-info">
          <div class="char-avatar">ğŸ‘¤</div>
          <div class="char-name-display" id="sidebar-name">NhÃ¢n váº­t</div>
          <div class="char-world-display" id="sidebar-world">Tháº¿ giá»›i</div>
        </div>
        <div class="sidebar-divider"></div>
        <div class="char-skill-label">Ká»¹ nÄƒng</div>
        <div class="char-skill-display" id="sidebar-skill">â€”</div>
        <div class="sidebar-divider"></div>
        <div class="char-skill-label">AI Engine</div>
        <div class="ai-badge-sidebar" id="sidebar-ai-badge">â€”</div>
        <div class="sidebar-divider"></div>
        <div class="char-skill-label">NhÃ¢n váº­t</div>
        <div id="npc-list"></div>
      </div>

      <div class="game-main">
        <div class="game-topbar">
          <button class="back-btn" onclick="backToMenu()">â† MÃ n hÃ¬nh chÃ­nh</button>
          <div class="chapter-label">ğŸ“– Äang phiÃªu lÆ°u táº¡i: <span id="world-title-top">â€”</span></div>
          <button class="save-btn" onclick="saveGame()">ğŸ’¾ LÆ°u game</button>
        </div>

        <div id="story-box">
          <div id="story-content"></div>
        </div>

        <div class="input-area">
          <textarea id="player-input" rows="2" placeholder="Báº¡n sáº½ lÃ m gÃ¬? (Enter Ä‘á»ƒ gá»­i, Shift+Enter Ä‘á»ƒ xuá»‘ng dÃ²ng)"></textarea>
          <button id="send-btn" onclick="sendMessage()">
            <span>Gá»­i</span>
            <span class="send-icon">â¤</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="game.js"></script>
</body>
</html>
